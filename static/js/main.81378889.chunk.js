(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,n){e.exports=n(51)},37:function(e,t,n){},43:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(14),i=n.n(s),u=(n(37),n(6)),c=n(8),o=n(9),l=n(11),d=n(10),p=n(12),m=n(13),h=n(60),g=n(61),f=n(62),b=(n(42),n(16)),v=function(){var e,t,n,r,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{groups:[{name:"defaultGroup",id:0}],users:[{name:"defaultUser",id:0,groupid:0}],currentGroup:0,currentUser:0},i=arguments.length>1?arguments[1]:void 0;switch(i.type){case"ADD_USER":return n=0,(t=s.users.map(function(e){return e.id>n&&(n=e.id),e})).push({name:i.name,id:n+1,groupid:s.currentGroup}),Object(u.a)({},s,{users:t,currentUser:null==s.currentUser?n+1:s.currentUser});case"UP_USER":return t=s.users.map(function(e){return e.id==i.id&&(e.name=i.name),e}),Object(u.a)({},s,{users:t});case"DEL_USER":return t=[],s.users.map(function(e){e.id!=i.id&&t.push(e)}),i.id==s.currentUser&&(r=t.find(function(e){return e.groupid==s.currentGroup})),Object(u.a)({},s,{users:t,currentUser:r?r.id:null});case"SET_CURRENT_USER":return Object(u.a)({},s,{currentUser:i.id});case"ADD_GROUP":return n=0,(e=s.groups.map(function(e){return e.id>n&&(n=e.id),e})).push({name:i.name,id:n+1}),Object(u.a)({},s,{groups:e});case"UP_GROUP":return e=s.groups.map(function(e){return e.id==i.id&&(e.name=i.name),e}),Object(u.a)({},s,{groups:e});case"DEL_GROUP":return e=[],t=[],s.users.map(function(e){e.groupid!=i.id&&t.push(e)}),s.groups.map(function(t){t.id!=i.id&&e.push(t)}),i.id==s.currentGroup&&(a=s.groups.find(function(e){return e.id!=i.id}))&&(r=s.users.find(function(e){return e.groupid==a.id})),Object(u.a)({},s,{groups:e,users:t,currentGroup:a?a.id:null,currentUser:r?r.id:null});case"SET_CURRENT_GROUP":return r=s.users.find(function(e){return e.groupid==i.id}),Object(u.a)({},s,{currentGroup:i.id,currentUser:r?r.id:null});default:return s}};console.log(v);var E=Object(b.b)({organization:v,message:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[]},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_MSG":return(e=t.messages.map(function(e){return e})).push(n.value),Object(u.a)({},t,{messages:e});case"DEL_MSG_BY_GROUP":return e=t.messages.filter(function(e){return e.groupid!=n.groupid}),Object(u.a)({},t,{messages:e});default:return t}}}),O=function(){return Object(b.c)(E)},y=(n(43),n(56)),U=n(54),j=n(63),G=n(57),k=n(58),S=n(53),w=n(59),A=n(52),N=n(64),R=n(55),_=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={isHover:!1,isEditing:!1,newName:n.props.value.name},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"mouseOver",value:function(){this.setState({isHover:!0})}},{key:"mouseOut",value:function(){this.setState({isHover:!1})}},{key:"rename",value:function(){this.setState({isEditing:!1}),this.props.update(this.state.newName)}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.value,s=n.isCurrent,i=this.state,c=i.isHover,o=i.isEditing,l=i.newName;return e=o?a.a.createElement(A.a,null,a.a.createElement(S.a,{value:l,onChange:function(e){return t.setState({newName:e.target.value})}}),a.a.createElement(N.a,{addonType:"append"},a.a.createElement(U.a,{color:"primary",onClick:this.rename.bind(this)},"Ok"))):a.a.createElement("span",{onClick:this.props.fouse.bind(this),style:{flex:1,cursor:"pointer"}},r.name),a.a.createElement(R.a,{onMouseOver:this.mouseOver.bind(this),onMouseOut:this.mouseOut.bind(this),style:{display:"flex",flexDirection:"row",background:s?"#cbd6e9":c?"#ccc":null}},e,a.a.createElement("span",{style:Object(u.a)({},C.icon,{display:c&&!o?"inherit":"none"}),onClick:this.props.delete.bind(this)},"del"),a.a.createElement("span",{style:Object(u.a)({},C.icon,{display:c&&!o?"inherit":"none"}),onClick:function(){t.setState({isEditing:!0})}},"edit"))}}]),t}(r.Component),C={icon:{fontSize:12,cursor:"pointer",margin:5}},D=_,P=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={isAdding:!1,newGroupName:""},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"cancleAdd",value:function(){this.setState({isAdding:!1})}},{key:"submitAdd",value:function(){this.setState({isAdding:!1}),this.props.dispatch({type:"ADD_GROUP",name:this.state.newGroupName})}},{key:"upGroup",value:function(e,t){this.props.dispatch(function(e,t){return{type:"UP_GROUP",id:e,name:t}}(e,t))}},{key:"delGroup",value:function(e){this.props.dispatch(function(e){return{type:"DEL_GROUP",id:e}}(e)),this.props.dispatch({type:"DEL_MSG_BY_GROUP",groupid:this.props.currentGroup})}},{key:"setFouse",value:function(e){this.props.dispatch(function(e){return{type:"SET_CURRENT_GROUP",id:e}}(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.groups,r=t.currentGroup,s=this.state,i=s.isAdding,u=s.newGroupName;return a.a.createElement("div",{className:"groups"},a.a.createElement(y.a,{className:"content"},n.map(function(t,n){return a.a.createElement(D,{value:t,key:n,isCurrent:r==t.id,delete:e.delGroup.bind(e,t.id),fouse:e.setFouse.bind(e,t.id),update:e.upGroup.bind(e,t.id)})})),a.a.createElement("div",{className:"input"},a.a.createElement(U.a,{color:"primary",onClick:function(){return e.setState({isAdding:!0,newGroupName:""})},style:{width:"100%"}},"Add Group")),a.a.createElement(j.a,{isOpen:i,toggle:this.cancleAdd.bind(this)},a.a.createElement(G.a,{toggle:this.cancleAdd.bind(this)},"Add Group"),a.a.createElement(k.a,null,a.a.createElement(S.a,{placeholder:"Group name",onChange:function(t){return e.setState({newGroupName:t.target.value})},value:u})),a.a.createElement(w.a,null,a.a.createElement(U.a,{onClick:this.submitAdd.bind(this),color:"primary"},"Submit"))))}}]),t}(r.Component);var T=P=Object(m.b)(function(e){var t=e.organization;return{groups:t.groups,currentGroup:t.currentGroup}})(P),M=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"logo"},"Chat")}}]),t}(r.Component),x=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={msg:""},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"updateMsg",value:function(e){this.setState({msg:e.target.value})}},{key:"sendMsg",value:function(){var e=this.state.msg,t=this.props,n=t.currentGroup,r=t.users,a=t.currentUser;console.log(r,a);var s,i,u=r.find(function(e){return e.id==a});e.length>0&&(this.props.dispatch((s=n,i=u?u.name:"default",{type:"ADD_MSG",value:{groupid:s,username:i,content:e}})),this.setState({msg:""}))}},{key:"render",value:function(){var e=this.props,t=e.messages,n=e.currentUser,r=e.currentGroup,s=this.state.msg;return a.a.createElement("div",{className:"messages"},a.a.createElement("div",{className:"content",role:"display"},t.filter(function(e){return e.groupid==r}).map(function(e,t){return a.a.createElement("div",{key:t},a.a.createElement("span",{className:"msg-user"},e.username,":"),a.a.createElement("span",{className:"msg-content"},e.content))})),a.a.createElement("div",{className:"input"},a.a.createElement(A.a,null,a.a.createElement(S.a,{value:s,placeholder:"Typing here",onChange:this.updateMsg.bind(this)}),a.a.createElement(N.a,{addonType:"append"},a.a.createElement(U.a,{color:"primary",disabled:null==n,onClick:this.sendMsg.bind(this)},"Send")))))}}]),t}(r.Component);var L=x=Object(m.b)(function(e){var t=e.message.messages,n=e.organization;return{messages:t,currentGroup:n.currentGroup,currentUser:n.currentUser,users:n.users}})(x),z=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={isAdding:!1,newUserName:""},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"cancleAdd",value:function(){this.setState({isAdding:!1})}},{key:"submitAdd",value:function(){this.setState({isAdding:!1}),this.props.dispatch({type:"ADD_USER",name:this.state.newUserName})}},{key:"upUser",value:function(e,t){this.props.dispatch({type:"UP_USER",id:e,name:t})}},{key:"delUser",value:function(e){this.props.dispatch({type:"DEL_USER",id:e})}},{key:"setFouse",value:function(e){this.props.dispatch(function(e){return{type:"SET_CURRENT_USER",id:e}}(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.users,r=t.currentUser,s=t.groups,i=t.currentGroup,u=this.state,c=u.isAdding,o=u.newUserName;return a.a.createElement("div",{className:"users"},a.a.createElement(y.a,{className:"content"},n.filter(function(e){return e.groupid==i}).map(function(t,n){return a.a.createElement(D,{key:n,value:t,isCurrent:r==t.id,delete:e.delUser.bind(e,t.id),fouse:e.setFouse.bind(e,t.id),update:e.upUser.bind(e,t.id)})})),a.a.createElement("div",{className:"input"},a.a.createElement(U.a,{color:"primary",disabled:s.length<=0,onClick:function(){return e.setState({isAdding:!0,newUserName:""})},style:{width:"100%"}},"Add User")),a.a.createElement(j.a,{isOpen:c,toggle:this.cancleAdd.bind(this)},a.a.createElement(G.a,{toggle:this.cancleAdd.bind(this)},"Add User"),a.a.createElement(k.a,null,a.a.createElement(S.a,{placeholder:"Username",onChange:function(t){return e.setState({newUserName:t.target.value})},value:o})),a.a.createElement(w.a,null,a.a.createElement(U.a,{onClick:this.submitAdd.bind(this),color:"primary"},"Submit"))))}}]),t}(r.Component);var H=z=Object(m.b)(function(e){var t=e.organization;return{users:t.users,groups:t.groups,currentUser:t.currentUser,currentGroup:t.currentGroup}})(z),B=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).store=O(),n.state={height:window.innerHeight},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.height;return a.a.createElement(m.a,{store:this.store},a.a.createElement(h.a,{style:Object(u.a)({},F.container,{height:e})},a.a.createElement(g.a,null,a.a.createElement(f.a,null,a.a.createElement(M,null))),a.a.createElement(g.a,{style:F.content},a.a.createElement(f.a,{sm:"3",xl:"2"},a.a.createElement(T,null)),a.a.createElement(f.a,null,a.a.createElement(L,null)),a.a.createElement(f.a,{sm:"3",xl:"2"},a.a.createElement(H,null)))))}}]),t}(r.Component),F={container:{paddingLeft:0,paddingRight:0,marginLeft:15,marginRight:0,maxWidth:"calc(100% - 30px)"},content:{height:"calc(100% - 50px)"}},W=B;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.81378889.chunk.js.map